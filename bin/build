#!/bin/sh

# exit on error
set -e

buildPackage () {
	(
		package=$1
		echo "building package: $package"
		cd "$package"
		npm run build --if-present
	)
}

bootstrap="./packages/bootstrap"
authentication="./packages/authentication"

# build this first otherwise ci breaks
buildPackage $authentication
buildPackage $bootstrap

for package in ./packages/*
do
	if [ "$package" = "$authentication" ]; then
		# skip for now because we did it earlier
		continue
	fi
	if [ "$package" = "$bootstrap" ]; then
		# skip for now because we did it earlier
		continue
	fi
	buildPackage $package
done
